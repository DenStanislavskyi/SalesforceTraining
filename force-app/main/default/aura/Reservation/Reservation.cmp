<aura:component implements="force:lightningQuickAction,force:hasRecordId" controller="FindRoutes">
<aura:attribute name="recordId" type="String"/>
<aura:attribute name="Schedule" type="Schedule__c"/>
<aura:attribute name="Columns" type="List" />
<aura:attribute name="maxRowSelection" type="Integer" default="1"/>
<aura:attribute name="scheduleStartDate" type="Date" />
<aura:attribute name="scheduleEndDate" type="Date" />
<aura:attribute name="arrivalPort" type="String" />
<aura:attribute name="departurePort" type="String" />
<aura:attribute name="selectedSchedule" type="String"/>
<aura:attribute name="isTableReady" type="Boolean" default="false"/>
<aura:attribute name="isScheduleSelected" type="Boolean" default="false"/>    
<aura:attribute name="isNotEmpty" type="Boolean" default="false"/> 



<lightning:card title="Schedule selection" >
        
        
            <lightning:recordEditForm objectApiName="Route__c">
                <lightning:input type="date"  label="Departure Date"    value="{!v.scheduleStartDate}" />
                <lightning:input type="date"  label="Arrival Date"  value="{!v.scheduleEndDate}"/>
                <lightning:inputField fieldName="Departure_Location__c" value="{!v.departurePort}" />
                <lightning:inputField fieldName="Arrival_Location__c" value="{!v.arrivalPort}" />
                <lightning:spinner variant="brand" size="large" aura:id="mySpinner"/>
            </lightning:recordEditForm>
            
               <lightning:button label="Search Schedules" title="Search action" onclick="{!c.getSchedule}"/>
            
</lightning:card>
<!--aura handler with waiting and donewaiting events-->
<aura:handler event="aura:waiting" action="{!c.showSpinner}"/>
<aura:handler event="aura:doneWaiting" action="{!c.hideSpinner}"/>


    <aura:method name="showToast" action="{!c.showToast}" description="Sample method with parameters">
 </aura:method>

<aura:if isTrue="{!v.isTableReady}">
    <lightning:datatable data="{!v.Schedule}" onrowselection="{!c.onSelectedSchedule}" columns="{!v.Columns }" keyField="Id"  maxRowSelection="{!v.maxRowSelection}"/>

 
<aura:if isTrue="{!v.isScheduleSelected}">
    <lightning:card title="New Reservation" >
        <lightning:recordEditForm objectApiName="Schedule_Reservation__c" onsuccess="{!c.handleClick}">
        <lightning:inputField fieldName="Name"/>
        <lightning:inputField fieldName="Product__c" />
        <lightning:inputField fieldName="TEU__c" />
        <lightning:button name="save" type="submit" label="Save"/>
        <lightning:inputField fieldName="Opportunity__c" value="{!v.recordId}" class="slds-hidden"/>
        <lightning:inputField fieldName="Schedule__c" value="{!v.selectedSchedule}" class="slds-hidden" />
        <lightning:inputField fieldName="Status__c" value="Locked" class="slds-hidden"/> 
        
    </lightning:recordEditForm>
    </lightning:card>
</aura:if>
</aura:if>




    

</aura:component>